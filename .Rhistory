setwd("~/U/DataW/Lab5")
library(tidyverse)
library(tidyr)
library(dplyr)
library(stringr)
df <- data.frame(row = LETTERS[1:3], a = 1:3, b = 4:6, c = 7:9)
df
df %>%
pivot_longer(cols = !row, names_to = "letters", values_to = "vals")
df %>%
pivot_longer( cols = c(a,b,c), names_to = "letters", values_to = "vals")
raw<-read.csv("raw.csv")
head(raw)
View(raw)
raw_longer <-raw %>%
pivot_longer(cols = !c(X,country,year) , names_to = "GenderAndAge", values_to = "cases")
raw_longer %>%
head()
?str_sub
raw_longer$sex <- str_sub(GenderAndAge, start = 2,end =4 )
raw_longer$sex <- str_sub(sex, start = 2,end =4 )
raw_longer$sex <- str_sub(GenderAndAge, start = 2,end =4 )
raw_longer$sex <- str_sub(GenderAndAge, start = 1,end =1 )
raw_longer <-raw %>%
pivot_longer(cols = !c(X,country,year) , names_to = "GR", values_to = "cases")
raw_longer %>%
head()
raw_longer$sex <- str_sub(raw_longer$GR, start = 1,end =1 )
raw_longer$sex <- str_sub(raw_longer$GR, start = 1,end =1 )
head(raw_longer)
raw_longer$sex <- str_sub(raw_longer$GR, start = 1,end =1 )
raw_longer$age <- str_sub(raw_longer$GR, start = 2,end =4 )
head(raw_longer)
raw_longer$age <- str_sub(raw_longer$GR, start = 2)
head(raw_longer)
raw_longer$sex <- str_sub(raw_longer$GR, start = 1,end =1 )
raw_longer$age <- str_sub(raw_longer$GR, start = 2,end=nchar())
raw_longer$sex <- str_sub(raw_longer$GR, start = 1,end =1 )
raw_longer$age <- str_sub(raw_longer$GR, start = 2,end=nchar(GR))
raw_longer$sex <- str_sub(raw_longer$GR, start = 1,end =1 )
raw_longer$age <- str_sub(raw_longer$GR, start = 2,end=nchar(raw_longer$GR))
head(raw_longer)
raw_longer$sex <- str_sub(raw_longer$GR, start = 1,end =1 )
raw_longer$age <- str_sub(raw_longer$GR, start = 2,end=nchar(raw_longer$GR))
raw_longer <- raw_longer%>%
select(-GR)
head(raw_longer)
ages <- c("0-4", "5-14", "0-14", "15-24", "25-34", "35-44", "45-54", "55-64", "65+", NA)
raw_longer <- factor(recode(raw_longer$age,
"04" = "0-4",
"514" = "5-14",
"014" = "0-14",
"1524" = "15-24",
"2534" = "25-34",
"3544" = "35-44",
"4554" = "45-54",
"5564" = "55-64",
"65" = "65+",
"u" = NA_character_),
levels =  ))
raw_longer <- factor(recode(raw_longer$age,
"04" = "0-4",
"514" = "5-14",
"014" = "0-14",
"1524" = "15-24",
"2534" = "25-34",
"3544" = "35-44",
"4554" = "45-54",
"5564" = "55-64",
"65" = "65+",
"u" = NA_character_),
levels = ages ))
raw_longer <- factor(recode(raw_longer$age,
"04" = "0-4",
"514" = "5-14",
"014" = "0-14",
"1524" = "15-24",
"2534" = "25-34",
"3544" = "35-44",
"4554" = "45-54",
"5564" = "55-64",
"65" = "65+",
"u" = NA_character_),
levels = ages )
raw_longer %>%
head()
raw_longer <-raw %>%
pivot_longer(cols = !c(X,country,year) , names_to = "GR", values_to = "cases")
raw_longer %>%
head()
raw_longer$sex <- str_sub(raw_longer$GR, start = 1,end =1 )
raw_longer$age <- str_sub(raw_longer$GR, start = 2,end=nchar(raw_longer$GR))
raw_longer <- raw_longer%>%
select(-GR)
head(raw_longer)
ages <- c("0-4", "5-14", "0-14", "15-24", "25-34", "35-44", "45-54", "55-64", "65+", NA)
raw_longer$Age <- factor(recode(raw_longer$age,
"04" = "0-4",
"514" = "5-14",
"014" = "0-14",
"1524" = "15-24",
"2534" = "25-34",
"3544" = "35-44",
"4554" = "45-54",
"5564" = "55-64",
"65" = "65+",
"u" = NA_character_),
levels = ages )
raw_longer %>%
head()
raw_longer <- raw_longer %>%
select(-age)
raw_longer %>%
head()
df <- data.frame(row = LETTERS[1:3], a = 1:3, b = 4:6, c = 7:9)
df
df %>%
pivot_longer(cols = !row, names_to = "letters", values_to = "vals")
library(tidyverse)
library(tidyr)
library(dplyr)
library(stringr)
df <- data.frame(row = LETTERS[1:3], a = 1:3, b = 4:6, c = 7:9)
df
df %>%
pivot_longer(cols = !row, names_to = "letters", values_to = "vals")
df %>%
pivot_longer( cols = c(a,b,c), names_to = "letters", values_to = "vals")
raw<-read.csv("raw.csv")
head(raw)
raw_longer <-raw %>%
pivot_longer(cols = !c(X,country,year) , names_to = "GR", values_to = "cases")
raw_longer %>%
head()
raw_longer$sex <- str_sub(raw_longer$GR, start = 1,end =1 )
raw_longer$age <- str_sub(raw_longer$GR, start = 2,end=nchar(raw_longer$GR))
raw_longer <- raw_longer%>%
select(-GR)
head(raw_longer)
ages <- c("0-4", "5-14", "0-14", "15-24", "25-34", "35-44", "45-54", "55-64", "65+", NA)
raw_longer$Age <- factor(recode(raw_longer$age,
"04" = "0-4",
"514" = "5-14",
"014" = "0-14",
"1524" = "15-24",
"2534" = "25-34",
"3544" = "35-44",
"4554" = "45-54",
"5564" = "55-64",
"65" = "65+",
"u" = NA_character_),
levels = ages )
raw_longer <- raw_longer %>%
select(-age)
raw_longer %>%
head()
setwd("~/U/DataW/Lab5")
library(tidyverse)
library(tidyr)
library(dplyr)
library(stringr)
df <- data.frame(row = LETTERS[1:3], a = 1:3, b = 4:6, c = 7:9)
df
df %>%
pivot_longer(cols = !row, names_to = "letters", values_to = "vals")
df %>%
pivot_longer( cols = c(a,b,c), names_to = "letters", values_to = "vals")
raw<-read.csv("raw.csv")
raw<-read.csv("raw.csv")
setwd("~/GitHub/Data-Wrangling")
raw<-read.csv("raw.csv")
head(raw)
raw_longer <-raw %>%
pivot_longer(cols = !c(X,country,year) , names_to = "GR", values_to = "cases")
raw_longer %>%
head()
```{r, echo=TRUE, cache=TRUE}
raw_longer$sex <- str_sub(raw_longer$GR, start = 1,end =1 )
raw_longer$age <- str_sub(raw_longer$GR, start = 2,end=nchar(raw_longer$GR))
raw_longer <- raw_longer%>%
select(-GR)
head(raw_longer)
ages <- c("0-4", "5-14", "0-14", "15-24", "25-34", "35-44", "45-54", "55-64", "65+", NA)
raw_longer$Age <- factor(recode(raw_longer$age,
"04" = "0-4",
"514" = "5-14",
"014" = "0-14",
"1524" = "15-24",
"2534" = "25-34",
"3544" = "35-44",
"4554" = "45-54",
"5564" = "55-64",
"65" = "65+",
"u" = NA_character_),
levels = ages )
raw_longer <- raw_longer %>%
select(-age)
raw_longer %>%
head()
